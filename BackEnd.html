type OrderItem = {
  id: string;
  name: string;
  qty: number;
  unitPrice: number;
  lineTotal: number;
  category: string;
  tags: string[];
  note: string | null;
};

type Totals = {
  subtotal: number;
  tax: number;
  service: number;
  total: number;
};

type Order = {
  orderId: string;
  status: string;
  createdAt: string;
  table: string;
  guests: number;
  servicePct: number;
  taxRate: number;
  totals: Totals;
  items: OrderItem[];
};

function printReceipt(order: Order): void {
  console.log("=".repeat(40));
  console.log("RECEIPT");
  console.log("Order ID:", order.orderId);
  console.log("Status:", order.status);
  console.log("Date:", new Date(order.createdAt).toLocaleString());
  console.log("Table:", order.table);
  console.log("Guests:", order.guests);
  console.log("-".repeat(40));
  console.log("Items:");
  order.items.forEach(item => {
    const tags = item.tags.length ? ` [${item.tags.join(", ")}]` : "";
    const note = item.note ? ` (Note: ${item.note})` : "";
    console.log(
      `${item.qty} x ${item.name}${tags}${note} @ $${item.unitPrice.toFixed(2)} = $${item.lineTotal.toFixed(2)}`
    );
  });
  console.log("-".repeat(40));
  console.log(`Subtotal: $${order.totals.subtotal.toFixed(2)}`);
  console.log(`Tax (${(order.taxRate * 100).toFixed(1)}%): $${order.totals.tax.toFixed(2)}`);
  console.log(`Service (${(order.servicePct * 100).toFixed(1)}%): $${order.totals.service.toFixed(2)}`);
  console.log(`Total: $${order.totals.total.toFixed(2)}`);
  console.log("=".repeat(40));
}

// Example usage with your provided order JSON
const orderData: Order = {
  orderId: "T12-10FD643D",
  status: "NEW",
  createdAt: "2026-02-26T19:21:30.930Z",
  table: "12",
  guests: 2,
  servicePct: 0,
  taxRate: 0.085,
  totals: {
    subtotal: 15,
    tax: 1.28,
    service: 0,
    total: 16.27,
  },
  items: [
    {
      id: "sm-hummus",
      name: "Smoked Pepper Hummus",
      qty: 1,
      unitPrice: 8,
      lineTotal: 8,
      category: "Small plates",
      tags: ["veg"],
      note: null,
    },
    {
      id: "sm-soup",
      name: "Market Soup",
      qty: 1,
      unitPrice: 7,
      lineTotal: 7,
      category: "Small plates",
      tags: ["veg", "glutenfree"],
      note: null,
    },
  ],
};

printReceipt(orderData);
